# Application name
spring.application.name=gateway
server.port=8080

# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://eureka:8761/eureka
eureka.instance.prefer-ip-address=true

# Redis configuration
spring.data.redis.host=redis
spring.data.redis.port=6379

# Cấu hình Spring Security (nếu có)
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://gateway:8080/.well-known/jwks.json

# Define Routes using LoadBalancer (Eureka)
spring.cloud.gateway.routes[0].id=product-service
spring.cloud.gateway.routes[0].uri=lb://product-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/admin/** 

spring.cloud.gateway.routes[0].filters[0]=RequestRateLimiter=redis-rate-limiter.replenishRate=1,redis-rate-limiter.burstCapacity=2

# Define Routes for Other Services
spring.cloud.gateway.routes[1].id=review-service
spring.cloud.gateway.routes[1].uri=lb://product-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/admin/reviews/**
spring.cloud.gateway.routes[1].filters[0]=RequestRateLimiter=redis-rate-limiter.replenishRate=1,redis-rate-limiter.burstCapacity=2

spring.cloud.gateway.routes[2].id=cart-service
spring.cloud.gateway.routes[2].uri=lb://product-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/admin/cart/**
spring.cloud.gateway.routes[2].filters[0]=RequestRateLimiter=redis-rate-limiter.replenishRate=1,redis-rate-limiter.burstCapacity=2

spring.cloud.gateway.routes[3].id=payment-service
spring.cloud.gateway.routes[3].uri=lb://product-service
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/admin/payment/**
spring.cloud.gateway.routes[3].filters[0]=RequestRateLimiter=redis-rate-limiter.replenishRate=1,redis-rate-limiter.burstCapacity=2
